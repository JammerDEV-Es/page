<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Blog - JammerDev</title>
  <style>
    :root{--bg:#1e1e1e;--ter:#2d2d30;--accent:#b46114;--accent-light:#b97c20;--text:#e1e4e8;--muted:#858585}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg),#000);color:var(--text);font-family:Segoe UI,Roboto,Arial,sans-serif}
    .wrap{max-width:980px;margin:28px auto;padding:20px}
    h1{color:var(--accent-light);margin:0 0 12px}
    .post{background:var(--ter);border:1px solid rgba(255,255,255,0.03);padding:14px;border-radius:8px;margin-bottom:12px}
    .meta{color:var(--muted);font-size:0.9rem;margin-bottom:8px}
    .title{font-weight:700;color:var(--text);margin-bottom:8px}
    .content{white-space:pre-wrap;line-height:1.6;color:var(--text);margin-bottom:8px}
    .openBtn{display:inline-block;margin-top:10px;padding:8px 10px;background:var(--accent);color:#111;border-radius:6px;text-decoration:none;font-weight:700}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Blog / Updates</h1>
    <div id="postsRoot">Loading...</div>
    <div style="margin-top:18px;color:var(--muted);font-size:0.9rem">
  </div>

  <script>
    async function load(){
      try{
        // posts.json está en el mismo directorio que este archivo
        const res = await fetch('./posts.json');
        if(!res.ok) throw new Error('HTTP ' + res.status);
        const posts = await res.json();
        render(posts);
      }catch(e){
        document.getElementById('postsRoot').innerHTML = '<div style="color:var(--muted)">Error cargando entradas: ' + e.message + '</div>';
        console.error(e);
      }
    }

    function formatDate(d){ const dt=new Date(d); return dt.toLocaleDateString(undefined,{year:'numeric',month:'short',day:'numeric'}); }

    function render(posts){
      const root = document.getElementById('postsRoot');
      root.innerHTML = '';
      if(!posts || posts.length===0){ root.innerHTML = '<div style="color:var(--muted)">No hay entradas.</div>'; return; }
      posts.slice().sort((a,b)=> new Date(b.date)-new Date(a.date)).forEach(p=>{
        const el = document.createElement('div'); el.className='post';
        const meta = document.createElement('div'); meta.className='meta'; meta.textContent = formatDate(p.date||new Date());
        const title = document.createElement('div'); title.className='title'; title.textContent = p.title||'Sin título';
        const cont = document.createElement('div'); cont.className='content'; cont.textContent = p.content||'';
        const a = document.createElement('a'); a.href = 'post.html?id=' + encodeURIComponent(p.id); a.className='openBtn'; a.target='_blank'; a.textContent = 'Abrir en nueva pestaña';
        el.appendChild(meta); el.appendChild(title); el.appendChild(cont); el.appendChild(a);
        root.appendChild(el);
      });
    }

    load();
  </script>
</body>
</html>
